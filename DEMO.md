# Rate Limit Monitor 演示指南

## 🎬 演示步骤

### 1. 安装演示

1. **打开Chrome扩展页面**
   ```
   chrome://extensions/
   ```

2. **启用开发者模式**
   - 点击右上角的"开发者模式"开关

3. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择 `claude-limit-monitor` 文件夹
   - 确认扩展已成功加载

### 2. 功能演示

#### A. 基本功能测试

1. **打开测试页面**
   ```bash
   # 在浏览器中打开
   file:///path/to/claude-limit-monitor/test.html
   ```

2. **检查插件状态**
   - 点击"重新检查"按钮
   - 确认显示"✅ Chrome扩展环境正常"

3. **模拟429错误**
   - 点击"模拟 Claude API 429"
   - 观察页面右上角出现红色倒计时框
   - 显示剩余时间倒计时

#### B. 实际网站测试

1. **访问Claude AI**
   ```
   https://claude.ai
   ```

2. **触发限制**
   - 发送大量请求直到触发429限制
   - 或使用开发者工具模拟429响应

3. **观察插件行为**
   - 自动显示倒计时UI
   - 实时更新剩余时间
   - 限制解除后自动隐藏

#### C. 管理界面演示

1. **打开插件弹窗**
   - 点击浏览器工具栏中的插件图标
   - 查看当前所有限制状态

2. **管理功能**
   - 查看多个域名的限制状态
   - 使用"刷新状态"按钮
   - 使用"清除所有"按钮

### 3. 高级功能演示

#### A. 多域名支持
```javascript
// 在控制台中模拟多个域名的限制
['claude.ai', 'api.openai.com', 'api.anthropic.com'].forEach((domain, i) => {
  setTimeout(() => {
    window.dispatchEvent(new CustomEvent('rateLimitDetected', {
      detail: {
        url: `https://${domain}/api/test`,
        domain: domain,
        resetAt: Math.floor(Date.now() / 1000) + (i + 1) * 300,
        status: 429,
        timestamp: Date.now()
      }
    }));
  }, i * 1000);
});
```

#### B. 不同时间格式测试
```javascript
// 测试不同的resetAt格式
const testCases = [
  { resetAt: Math.floor(Date.now() / 1000) + 60 },    // 1分钟
  { resetAt: Math.floor(Date.now() / 1000) + 3600 },  // 1小时
  { resetAt: Math.floor(Date.now() / 1000) + 300 },   // 5分钟
];

testCases.forEach((test, i) => {
  setTimeout(() => {
    window.dispatchEvent(new CustomEvent('rateLimitDetected', {
      detail: {
        url: `https://test${i}.com/api`,
        domain: `test${i}.com`,
        resetAt: test.resetAt,
        status: 429,
        timestamp: Date.now()
      }
    }));
  }, i * 2000);
});
```

## 📊 演示要点

### 核心功能展示

1. **自动检测**
   - ✅ 拦截fetch请求
   - ✅ 拦截XMLHttpRequest
   - ✅ 识别429状态码
   - ✅ 解析resetAt时间戳

2. **UI显示**
   - ✅ 实时倒计时
   - ✅ 美观的界面设计
   - ✅ 响应式布局
   - ✅ 自动隐藏过期限制

3. **数据管理**
   - ✅ 本地存储持久化
   - ✅ 多域名支持
   - ✅ 自动清理过期数据
   - ✅ 手动清除功能

4. **用户体验**
   - ✅ 一键安装
   - ✅ 零配置使用
   - ✅ 直观的状态显示
   - ✅ 完整的管理界面

### 技术亮点

1. **兼容性**
   - 支持多种API格式
   - 兼容不同的时间戳格式
   - 适配各种网站结构

2. **性能**
   - 轻量级实现
   - 最小化性能影响
   - 高效的事件处理

3. **可扩展性**
   - 模块化设计
   - 易于添加新的解析规则
   - 支持自定义配置

## 🎯 演示脚本

### 开场白
"今天我要演示一个Chrome扩展插件，它可以自动监控API的429限制错误，并显示恢复时间的倒计时。这对于使用Claude AI、ChatGPT等服务的用户非常有用。"

### 安装演示
"首先，我们来安装这个插件。打开Chrome的扩展管理页面，启用开发者模式，然后加载我们的插件文件夹。可以看到插件已经成功安装。"

### 功能演示
"现在让我们测试插件的功能。我打开测试页面，点击模拟Claude API的429错误。看，页面右上角立即出现了一个红色的倒计时框，显示还有5分钟限制解除。"

### 管理界面
"点击插件图标，我们可以看到一个管理界面，显示了所有域名的限制状态。这里可以查看详细信息，也可以手动清除限制记录。"

### 实际应用
"在实际使用中，当你访问Claude AI或其他API服务时，如果遇到429限制，插件会自动检测并显示倒计时，让你知道什么时候可以继续使用。"

### 结束语
"这个插件完全在本地运行，不会收集任何个人数据，是一个实用的开发工具。"

## 📝 演示检查清单

- [ ] 扩展安装成功
- [ ] 测试页面功能正常
- [ ] 429错误检测工作
- [ ] UI倒计时显示正确
- [ ] 弹窗管理界面可用
- [ ] 多域名支持验证
- [ ] 数据持久化测试
- [ ] 清除功能验证
- [ ] 响应式设计检查
- [ ] 错误处理测试

## 🔧 故障排除

### 演示中可能遇到的问题

1. **插件加载失败**
   - 检查manifest.json语法
   - 确认所有文件都存在
   - 查看扩展页面的错误信息

2. **测试页面不工作**
   - 确认在Chrome中打开
   - 检查控制台错误
   - 验证扩展权限

3. **UI不显示**
   - 检查CSS样式冲突
   - 确认content script注入
   - 查看元素检查器

4. **倒计时不准确**
   - 验证时间戳格式
   - 检查时区设置
   - 确认计算逻辑

记住：演示前先完整测试一遍所有功能！
